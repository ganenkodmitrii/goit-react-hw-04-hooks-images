(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{16:function(e,t,c){},39:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c.n(a),o=c(4),i=c.n(o),s=(c(16),c(3)),l=c(7);c(17);function u(e){var t=e.formSubmitHandler,c=Object(a.useState)(""),r=Object(s.a)(c,2),o=r[0],i=r[1],u=function(){i("")};return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""===o.trim())return l.b.info("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u0432 \u043f\u043e\u0438\u0441\u043a! :(");t(o),u()},className:"SearchForm",children:[Object(n.jsx)("input",{className:"SearchForm-input",type:"text",value:o,autoComplete:"off",autoFocus:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:function(e){i(e.currentTarget.value.toLowerCase())}}),Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})})]})})}var j=c(8);var b={fetchImages:function(e,t){return fetch("".concat("https://pixabay.com/api/","?key=").concat("19044793-8d0b89c981ce143090a5b157d","&page=").concat(t,"&image_type=photo&orientation=horizontal&per_page=12&q=").concat(e)).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"))}))}},d=c(2),m=c.n(d);function h(e){var t=e.webformatURL,c=e.largeImageURL,a=e.clickOnImageItem;return Object(n.jsx)("li",{onClick:function(){return a(c)},className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:t,url:c,alt:"",className:"ImageGalleryItem-image"})})}var O=document.querySelector("#modal-root");function f(e){var t=e.onCloseModal,c=e.children;Object(a.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}));var r=function(e){"Escape"===e.code&&t()};return Object(o.createPortal)(Object(n.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(n.jsx)("div",{className:"Modal",children:c})}),O)}function g(e){var t=e.images,c=Object(a.useState)(!1),r=Object(s.a)(c,2),o=r[0],i=r[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),j=u[0],b=u[1],d=function(e){i(!0),b(e)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(n.jsx)(h,{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,clickOnImageItem:d},e.id)}))}),o&&Object(n.jsx)(f,{onCloseModal:function(){i(!1)},children:Object(n.jsx)("img",{style:{height:540},src:j,alt:""})})]})}function x(e){var t=e.loadMoreBtn;return Object(n.jsx)("div",{className:"BoxBtn",children:Object(n.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})}h.propTypes={openModal:m.a.func,closeModal:m.a.func,contacts:m.a.arrayOf(m.a.shape({webformatURL:m.a.string.isRequired,largeImageURL:m.a.string.isRequired,id:m.a.string.isRequired})),showModal:m.a.bool,imageModal:m.a.string};var p=c(10),v=c.n(p);function y(){return Object(n.jsx)("div",{style:{textAlign:"center"},children:Object(n.jsx)(v.a,{type:"Circles",color:"#00BFFF",height:100,width:100,timeout:3e3})})}function w(e){var t=e.message;return Object(n.jsx)("div",{role:"alert",children:Object(n.jsxs)("p",{children:["\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. Error: ",t]})})}function I(){return Object(n.jsx)("div",{style:{textAlign:"center"},children:Object(n.jsx)("p",{children:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u043d\u0435\u0442"})})}function S(e){var t=e.searchImage,c=Object(a.useState)([]),r=Object(s.a)(c,2),o=r[0],i=r[1],l=Object(a.useState)(1),u=Object(s.a)(l,2),d=u[0],m=u[1],h=Object(a.useState)(null),O=Object(s.a)(h,2),f=O[0],p=O[1],v=Object(a.useState)("idle"),S=Object(s.a)(v,2),k=S[0],N=S[1];return Object(a.useEffect)((function(){m(1)}),[t]),Object(a.useEffect)((function(){""!==t&&(""!==t&&1===d&&(N("pending"),b.fetchImages(t,d).then((function(e){i(Object(j.a)(e.hits)),N("resolved")})).catch((function(e){p(e),N("rejected")}))),""!==t&&1!==d&&b.fetchImages(t,d).then((function(e){i((function(t){return[].concat(Object(j.a)(t),Object(j.a)(e.hits))})),N("resolved")})).finally((function(){return setTimeout((function(){window.scrollBy({top:document.documentElement.clientHeight-160,behavior:"smooth"})}),500)})))}),[d,t]),"idle"===k?Object(n.jsx)("div",{style:{textAlign:"center"},children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432 \u043f\u043e\u0438\u0441\u043a"}):"pending"===k?Object(n.jsx)(y,{}):"rejected"===k?Object(n.jsx)(w,{message:f.message}):"resolved"===k?o.length?Object(n.jsxs)("div",{style:{margin:"0 auto",padding:10},children:[Object(n.jsx)(g,{images:o}),Object(n.jsx)(x,{loadMoreBtn:function(){return m(d+1)}})]}):Object(n.jsx)(I,{}):void 0}var k=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),c=t[0],r=t[1];return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(u,{formSubmitHandler:function(e){r(e)}}),Object(n.jsx)(S,{searchImage:c}),Object(n.jsx)(l.a,{autoClose:2e3,position:"top-center"})]})};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.00611a84.chunk.js.map